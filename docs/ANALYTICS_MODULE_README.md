# üìä Analytics Module - –°–∏—Å—Ç–µ–º–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–î–∞—Ç–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:** 10.10.2025  
**–í–µ—Ä—Å–∏—è:** 1.0.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ì–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

---

## üéØ –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –º–æ–¥—É–ª—è

**Analytics Module** ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ **–º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏** –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Pain Management System. –ú–æ–¥—É–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–±–∏—Ä–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –æ –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏—è—Ö –≤ —Å–∏—Å—Ç–µ–º–µ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç REST API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏.

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. **–ë–∏–∑–Ω–µ—Å-–∞–Ω–∞–ª–∏—Ç–∏–∫–∞** ‚Äî —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º, —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º, —ç—Å–∫–∞–ª–∞—Ü–∏—è–º
2. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤
3. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏** ‚Äî –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π
4. **–ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ —á—Ç–æ –¥–µ–ª–∞–ª –≤ —Å–∏—Å—Ç–µ–º–µ

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    PAIN MANAGEMENT SYSTEM                       ‚îÇ
‚îÇ  (DoctorService, NurseService, AnesthesiologistService, etc.)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  Spring Events      ‚îÇ ‚Üê –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π
                    ‚îÇ  (Event Bus)        ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ     AnalyticsEventListener (@Async)         ‚îÇ
        ‚îÇ  - handleRecommendationApproved()           ‚îÇ
        ‚îÇ  - handleEscalationResolved()               ‚îÇ
        ‚îÇ  - handlePatientRegistered()                ‚îÇ
        ‚îÇ  - handleUserLogin()                        ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ   MongoDB           ‚îÇ
                    ‚îÇ  - AnalyticsEvent   ‚îÇ
                    ‚îÇ  - LogEntry         ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üë
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ     LoggingAspect (AOP)                     ‚îÇ
        ‚îÇ  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Å–µ—Ö –º–µ—Ç–æ–¥–æ–≤  ‚îÇ
        ‚îÇ  - –ü–µ—Ä–µ—Ö–≤–∞—Ç —á–µ—Ä–µ–∑ @Around                   ‚îÇ
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ  AnalyticsService   ‚îÇ
                    ‚îÇ  - –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö ‚îÇ
                    ‚îÇ  - –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                              ‚Üì
                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                    ‚îÇ AnalyticsController ‚îÇ
                    ‚îÇ  REST API –¥–ª—è Admin ‚îÇ
                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–æ–¥—É–ª—è

```
analytics/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ AsyncConfig.java              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏
‚îú‚îÄ‚îÄ aspect/
‚îÇ   ‚îî‚îÄ‚îÄ LoggingAspect.java            # AOP –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
‚îú‚îÄ‚îÄ entity/
‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEvent.java           # MongoDB –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ LogEntry.java                 # MongoDB –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ PerformanceMetric.java        # MongoDB –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ repository/
‚îÇ   ‚îú‚îÄ‚îÄ AnalyticsEventRepository.java # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ LogEntryRepository.java       # –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–ª—è –ª–æ–≥–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ PerformanceMetricRepository.java
‚îú‚îÄ‚îÄ event/
‚îÇ   ‚îú‚îÄ‚îÄ PersonCreatedEvent.java       # –°–æ–±—ã—Ç–∏–µ: —Å–æ–∑–¥–∞–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ PersonDeletedEvent.java       # –°–æ–±—ã—Ç–∏–µ: —É–¥–∞–ª–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ PersonUpdatedEvent.java       # –°–æ–±—ã—Ç–∏–µ: –æ–±–Ω–æ–≤–ª–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫
‚îÇ   ‚îú‚îÄ‚îÄ UserLoginEvent.java           # –°–æ–±—ã—Ç–∏–µ: –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ RecommendationApprovedEvent.java  # –°–æ–±—ã—Ç–∏–µ: –æ–¥–æ–±—Ä–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ EscalationCreatedEvent.java   # –°–æ–±—ã—Ç–∏–µ: —Å–æ–∑–¥–∞–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ EscalationResolvedEvent.java  # –°–æ–±—ã—Ç–∏–µ: —Ä–∞–∑—Ä–µ—à–µ–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ PatientRegisteredEvent.java   # –°–æ–±—ã—Ç–∏–µ: –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø–∞—Ü–∏–µ–Ω—Ç
‚îÇ   ‚îî‚îÄ‚îÄ VasRecordedEvent.java         # –°–æ–±—ã—Ç–∏–µ: –∑–∞–ø–∏—Å–∞–Ω VAS
‚îú‚îÄ‚îÄ listener/
‚îÇ   ‚îî‚îÄ‚îÄ AnalyticsEventListener.java   # –°–ª—É—à–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π)
‚îú‚îÄ‚îÄ dto/
‚îÇ   ‚îú‚îÄ‚îÄ EventStatsDTO.java            # DTO –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ UserActivityDTO.java          # DTO –¥–ª—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îÇ   ‚îú‚îÄ‚îÄ PerformanceStatsDTO.java      # DTO –¥–ª—è –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
‚îÇ   ‚îî‚îÄ‚îÄ PatientStatsDTO.java          # DTO –¥–ª—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
‚îú‚îÄ‚îÄ service/
‚îÇ   ‚îî‚îÄ‚îÄ AnalyticsService.java         # –°–µ—Ä–≤–∏—Å –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü–∏–∏ –∏ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫
‚îî‚îÄ‚îÄ controller/
    ‚îî‚îÄ‚îÄ AnalyticsController.java      # REST API –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
```

---

## üîÑ Workflow: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –º–æ–¥—É–ª—å

### **1. –ë–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–µ (Spring Events)**

```java
// DoctorService –æ–¥–æ–±—Ä—è–µ—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é
public void approveRecommendation(Long id, RecommendationApprovalDTO dto) {
    // ... –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ ...
    
    // –ü—É–±–ª–∏–∫—É–µ–º —Å–æ–±—ã—Ç–∏–µ (–ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫)
    eventPublisher.publishEvent(new RecommendationApprovedEvent(
        this, recommendationId, doctorId, patientMrn, ...
    ));
    
    return result; // –ü—Ä–æ–¥–æ–ª–∂–∞–µ–º —Ä–∞–±–æ—Ç—É –°–†–ê–ó–£
}
```

### **2. –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è**

```java
// AnalyticsEventListener –ø–æ–ª—É—á–∞–µ—Ç —Å–æ–±—ã—Ç–∏–µ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º –ø–æ—Ç–æ–∫–µ
@EventListener
@Async("analyticsTaskExecutor") // ‚Üê –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ!
public void handleRecommendationApproved(RecommendationApprovedEvent event) {
    // –°–æ–∑–¥–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –¥–ª—è MongoDB
    AnalyticsEvent analyticsEvent = AnalyticsEvent.builder()
        .timestamp(LocalDateTime.now())
        .eventType("RECOMMENDATION_APPROVED")
        .userId(event.getDoctorId())
        .patientMrn(event.getPatientMrn())
        .processingTimeMs(event.getProcessingTimeMs())
        .build();
    
    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –≤ MongoDB
    analyticsEventRepository.save(analyticsEvent);
}
```

### **3. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (AOP)**

```java
// LoggingAspect –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –í–°–ï –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–æ–≤
@Around("execution(* pain_helper_back..service..*.*(..))")
public Object logServiceMethod(ProceedingJoinPoint joinPoint) {
    long startTime = System.currentTimeMillis();
    
    try {
        Object result = joinPoint.proceed(); // –í—ã–ø–æ–ª–Ω—è–µ–º –º–µ—Ç–æ–¥
        return result;
    } catch (Exception e) {
        // –õ–æ–≥–∏—Ä—É–µ–º –æ—à–∏–±–∫—É
    } finally {
        long duration = System.currentTimeMillis() - startTime;
        
        // –°–æ—Ö—Ä–∞–Ω—è–µ–º –ª–æ–≥ –≤ MongoDB
        LogEntry logEntry = LogEntry.builder()
            .className(className)
            .methodName(methodName)
            .durationMs(duration)
            .success(exception == null)
            .build();
        
        logEntryRepository.save(logEntry);
    }
}
```

### **4. –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ —á–µ—Ä–µ–∑ REST API**

```java
// Admin –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
GET /api/analytics/performance?startDate=2025-10-01T00:00:00&endDate=2025-10-10T23:59:59

// AnalyticsService –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ MongoDB
public PerformanceStatsDTO getPerformanceStats(startDate, endDate) {
    List<AnalyticsEvent> events = repository.findByTimestampBetween(startDate, endDate);
    
    // –í—ã—á–∏—Å–ª—è–µ–º –º–µ—Ç—Ä–∏–∫–∏
    Long totalRecommendations = events.stream()
        .filter(e -> "RECOMMENDATION_APPROVED".equals(e.getEventType()))
        .count();
    
    Double avgTime = events.stream()
        .mapToLong(AnalyticsEvent::getProcessingTimeMs)
        .average()
        .orElse(0.0);
    
    return new PerformanceStatsDTO(avgTime, totalRecommendations, ...);
}
```

---

## üé≠ –†–æ–ª–∏ –∏ –¥–æ—Å—Ç—É–ø

### **üë®‚Äç‚öïÔ∏è ADMIN (–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–æ–ª—å–Ω–∏—Ü—ã)**

**–î–æ—Å—Ç—É–ø:** ‚úÖ –ü–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º Analytics API

**–§—É–Ω–∫—Ü–∏–∏:**
- –ü—Ä–æ—Å–º–æ—Ç—Ä –æ–±—â–µ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ —Å–∏—Å—Ç–µ–º—ã
- –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—Å–º–æ—Ç—Ä —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏—Ö –ª–æ–≥–æ–≤
- –ê—É–¥–∏—Ç –¥–µ–π—Å—Ç–≤–∏–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∞

**Dashboard –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
1. **–û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞** ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–±—ã—Ç–∏–π –ø–æ —Ç–∏–ø–∞–º
2. **–ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π** ‚Äî –∫—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ —Å–∏—Å—Ç–µ–º–µ
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** ‚Äî —Å—Ä–µ–¥–Ω–µ–µ –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π
4. **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤** ‚Äî —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏, VAS –∑–∞–ø–∏—Å–∏
5. **–¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏** ‚Äî –æ—à–∏–±–∫–∏, –º–µ–¥–ª–µ–Ω–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### **üë®‚Äç‚öïÔ∏è DOCTOR, NURSE, ANESTHESIOLOGIST**

**–î–æ—Å—Ç—É–ø:** ‚ùå –ù–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ Analytics API (—Ç–æ–ª—å–∫–æ Admin)

**–ü—Ä–∏—á–∏–Ω–∞:** –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å–∏—Å—Ç–µ–º—ã, –Ω–µ –¥–ª—è –∫–ª–∏–Ω–∏—á–µ—Å–∫–æ–≥–æ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.

---

## üì° REST API Endpoints

### **1. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Å–æ–±—ã—Ç–∏–π**

```http
GET /api/analytics/events/stats
Query params:
  - startDate (optional): 2025-10-01T00:00:00
  - endDate (optional): 2025-10-10T23:59:59

Response:
{
  "totalEvents": 1523,
  "eventsByType": {
    "RECOMMENDATION_APPROVED": 342,
    "ESCALATION_RESOLVED": 89,
    "PATIENT_REGISTERED": 156,
    "USER_LOGIN_SUCCESS": 523
  },
  "eventsByRole": {
    "DOCTOR": 450,
    "NURSE": 680,
    "ANESTHESIOLOGIST": 120,
    "ADMIN": 273
  },
  "eventsByStatus": {
    "APPROVED": 342,
    "RESOLVED": 89,
    "SUCCESS": 523
  }
}
```

### **2. –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

```http
GET /api/analytics/users/{userId}/activity
Path params:
  - userId: "doctor123"
Query params:
  - startDate (optional)
  - endDate (optional)

Response:
{
  "userId": "doctor123",
  "userRole": "DOCTOR",
  "totalActions": 145,
  "lastActivity": "2025-10-10T18:30:00",
  "loginCount": 23,
  "failedLoginCount": 2
}
```

### **3. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–∏—Å—Ç–µ–º—ã**

```http
GET /api/analytics/performance
Query params:
  - startDate (optional)
  - endDate (optional)

Response:
{
  "averageProcessingTimeMs": 1250.5,
  "totalRecommendations": 342,
  "approvedRecommendations": 298,
  "rejectedRecommendations": 44,
  "totalEscalations": 89,
  "resolvedEscalations": 76,
  "averageEscalationResolutionTimeMs": 3600000
}
```

### **4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤**

```http
GET /api/analytics/patients/stats
Query params:
  - startDate (optional)
  - endDate (optional)

Response:
{
  "totalPatients": 156,
  "patientsByGender": {
    "MALE": 78,
    "FEMALE": 78
  },
  "patientsByAgeGroup": {
    "18-29": 23,
    "30-44": 45,
    "45-59": 56,
    "60-74": 28,
    "75+": 4
  },
  "totalVasRecords": 523,
  "criticalVasRecords": 89,
  "averageVasLevel": 5.2
}
```

### **5. –ü–æ—Å–ª–µ–¥–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è**

```http
GET /api/analytics/events/recent?limit=50

Response: [
  {
    "id": "67890abc",
    "timestamp": "2025-10-10T18:30:00",
    "eventType": "RECOMMENDATION_APPROVED",
    "userId": "doctor123",
    "userRole": "DOCTOR",
    "patientMrn": "000123",
    "processingTimeMs": 1200
  },
  ...
]
```

### **6. –°–æ–±—ã—Ç–∏—è –ø–æ —Ç–∏–ø—É**

```http
GET /api/analytics/events/type/RECOMMENDATION_APPROVED
Query params:
  - startDate (optional)
  - endDate (optional)

Response: [ ... —Å–ø–∏—Å–æ–∫ —Å–æ–±—ã—Ç–∏–π ... ]
```

### **7. –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –ª–æ–≥–∏**

```http
GET /api/analytics/logs/recent?limit=100

Response: [
  {
    "id": "log123",
    "timestamp": "2025-10-10T18:30:00",
    "className": "DoctorServiceImpl",
    "methodName": "approveRecommendation",
    "durationMs": 1250,
    "success": true,
    "module": "doctor"
  },
  ...
]
```

### **8. –õ–æ–≥–∏ –ø–æ —É—Ä–æ–≤–Ω—é**

```http
GET /api/analytics/logs/level/ERROR
Query params:
  - startDate (optional)
  - endDate (optional)

Response: [ ... —Å–ø–∏—Å–æ–∫ –ª–æ–≥–æ–≤ —Å –æ—à–∏–±–∫–∞–º–∏ ... ]
```

---

## üß™ –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥—É–ª—å

### **–ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è:**

1. ‚úÖ MongoDB –∑–∞–ø—É—â–µ–Ω –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
2. ‚úÖ –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ
3. ‚úÖ –í `application.properties` –Ω–∞—Å—Ç—Ä–æ–µ–Ω MongoDB:
```properties
spring.data.mongodb.uri=mongodb://localhost:27017/pain_management_analytics
```

---

### **–¢–µ—Å—Ç 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ LoggingAspect –ª–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–æ–≤

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –ª—é–±—É—é –æ–ø–µ—Ä–∞—Ü–∏—é —á–µ—Ä–µ–∑ API (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞—Ü–∏–µ–Ω—Ç–∞)
```http
POST /api/nurse/patients
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ MongoDB:
```http
GET /api/analytics/logs/recent?limit=10
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
[
  {
    "className": "NurseServiceImpl",
    "methodName": "createPatient",
    "durationMs": 250,
    "success": true,
    "module": "nurse"
  }
]
```

---

### **–¢–µ—Å—Ç 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è

**–®–∞–≥–∏:**
1. –û–¥–æ–±—Ä–∏—Ç–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—é:
```http
PUT /api/doctor/recommendations/1/approve
{
  "comment": "Test approval"
}
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–æ–±—ã—Ç–∏—è:
```http
GET /api/analytics/events/type/RECOMMENDATION_APPROVED
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
[
  {
    "eventType": "RECOMMENDATION_APPROVED",
    "recommendationId": 1,
    "userId": "doctor123",
    "userRole": "DOCTOR",
    "processingTimeMs": 1200
  }
]
```

---

### **–¢–µ—Å—Ç 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ AnalyticsService –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∞–≥—Ä–µ–≥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π:
   - –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–π—Ç–µ 3 –ø–∞—Ü–∏–µ–Ω—Ç–æ–≤
   - –û–¥–æ–±—Ä–∏—Ç–µ 2 —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏
   - –°–æ–∑–¥–∞–π—Ç–µ 1 —ç—Å–∫–∞–ª–∞—Ü–∏—é

2. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É:
```http
GET /api/analytics/events/stats
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "totalEvents": 6,
  "eventsByType": {
    "PATIENT_REGISTERED": 3,
    "RECOMMENDATION_APPROVED": 2,
    "ESCALATION_CREATED": 1
  }
}
```

---

### **–¢–µ—Å—Ç 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –≤—ã—á–∏—Å–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ–ø–µ—Ä–∞—Ü–∏–π —Å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏

2. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏:
```http
GET /api/analytics/performance
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "averageProcessingTimeMs": 1250.5,
  "totalRecommendations": 5,
  "approvedRecommendations": 4,
  "rejectedRecommendations": 1
}
```

---

### **–¢–µ—Å—Ç 5: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –ø–æ –¥–∞—Ç–∞–º**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –≤—Ä–µ–º–µ–Ω–Ω–æ–º—É –¥–∏–∞–ø–∞–∑–æ–Ω—É —Ä–∞–±–æ—Ç–∞–µ—Ç

**–®–∞–≥–∏:**
1. –ó–∞–ø—Ä–æ—Å–∏—Ç–µ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–π –ø–µ—Ä–∏–æ–¥:
```http
GET /api/analytics/events/stats?startDate=2025-10-01T00:00:00&endDate=2025-10-10T23:59:59
```

2. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –¢–æ–ª—å–∫–æ —Å–æ–±—ã—Ç–∏—è –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ

---

### **–¢–µ—Å—Ç 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```http
POST /api/person/login
{
  "login": "doctor123",
  "password": "password"
}
```

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å:
```http
GET /api/analytics/users/doctor123/activity
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "userId": "doctor123",
  "loginCount": 1,
  "failedLoginCount": 0,
  "totalActions": 5
}
```

---

### **–¢–µ—Å—Ç 7: –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫**

**–¶–µ–ª—å:** –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ—à–∏–±–∫–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–®–∞–≥–∏:**
1. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –æ–ø–µ—Ä–∞—Ü–∏—é, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑–æ–≤–µ—Ç –æ—à–∏–±–∫—É (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø–∞—Ü–∏–µ–Ω—Ç)

2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –æ—à–∏–±–æ–∫:
```http
GET /api/analytics/logs/level/ERROR
```

3. **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
[
  {
    "level": "ERROR",
    "success": false,
    "errorMessage": "Patient not found"
  }
]
```

---

## üîß –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### **AsyncConfig.java**

```java
@Configuration
@EnableAsync
public class AsyncConfig {
    @Bean(name = "analyticsTaskExecutor")
    public Executor analyticsTaskExecutor() {
        ThreadPoolTaskExecutor executor = new ThreadPoolTaskExecutor();
        executor.setCorePoolSize(5);        // 5 –ø–æ—Ç–æ–∫–æ–≤
        executor.setMaxPoolSize(10);        // –ú–∞–∫—Å–∏–º—É–º 10
        executor.setQueueCapacity(100);     // –û—á–µ—Ä–µ–¥—å –Ω–∞ 100 –∑–∞–¥–∞—á
        executor.setThreadNamePrefix("analytics-");
        executor.initialize();
        return executor;
    }
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `corePoolSize=5` ‚Äî –ø–æ—Å—Ç–æ—è–Ω–Ω–æ —Ä–∞–±–æ—Ç–∞—é—Ç 5 –ø–æ—Ç–æ–∫–æ–≤
- `maxPoolSize=10` ‚Äî –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ –¥–æ 10 –ø–æ—Ç–æ–∫–æ–≤
- `queueCapacity=100` ‚Äî –æ—á–µ—Ä–µ–¥—å –Ω–∞ 100 –∑–∞–¥–∞—á

---

## üìä –¢–∏–ø—ã —Å–æ–±—ã—Ç–∏–π

| –°–æ–±—ã—Ç–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –ü—É–±–ª–∏–∫—É–µ—Ç—Å—è –≤ |
|---------|----------|---------------|
| `PERSON_CREATED` | –°–æ–∑–¥–∞–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ | AdminServiceImpl.createPerson() |
| `PERSON_DELETED` | –£–¥–∞–ª–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ | AdminServiceImpl.deletePerson() |
| `PERSON_UPDATED` | –û–±–Ω–æ–≤–ª–µ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ | AdminServiceImpl.updatePerson() |
| `USER_LOGIN_SUCCESS` | –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ | PersonService.login() |
| `USER_LOGIN_FAILED` | –ù–µ—É–¥–∞—á–Ω—ã–π –≤—Ö–æ–¥ | PersonService.login() |
| `RECOMMENDATION_APPROVED` | –û–¥–æ–±—Ä–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | DoctorServiceImpl.approveRecommendation() |
| `RECOMMENDATION_REJECTED` | –û—Ç–∫–ª–æ–Ω–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è | DoctorServiceImpl.rejectRecommendation() |
| `ESCALATION_CREATED` | –°–æ–∑–¥–∞–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è | DoctorServiceImpl.rejectRecommendation() |
| `ESCALATION_RESOLVED` | –†–∞–∑—Ä–µ—à–µ–Ω–∞ —ç—Å–∫–∞–ª–∞—Ü–∏—è | AnesthesiologistServiceImpl.approveEscalation() |
| `PATIENT_REGISTERED` | –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø–∞—Ü–∏–µ–Ω—Ç | NurseServiceImpl.createPatient() |
| `VAS_RECORDED` | –ó–∞–ø–∏—Å–∞–Ω VAS | NurseServiceImpl.createVAS() |

---

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- ‚úÖ –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –ø–æ—Ç–æ–∫–∞—Ö
- ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ –ù–ï –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
- ‚úÖ –ï—Å–ª–∏ MongoDB –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å

### **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤**
- ‚úÖ –ò–Ω–¥–µ–∫—Å—ã –Ω–∞ `timestamp`, `eventType`, `userId`, `level`
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –æ–±—ä–µ–º–∞ –¥–∞–Ω–Ω—ã—Ö

---

## üéØ –û—Ç—á–µ—Ç–Ω–æ—Å—Ç—å –æ –ø—Ä–æ–¥–µ–ª–∞–Ω–Ω–æ–π —Ä–∞–±–æ—Ç–µ

### **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**

‚úÖ **MongoDB –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ pom.xml
- –ù–∞—Å—Ç—Ä–æ–µ–Ω MongoDB –≤ application.properties
- –°–æ–∑–¥–∞–Ω—ã 3 –∫–æ–ª–ª–µ–∫—Ü–∏–∏: AnalyticsEvent, LogEntry, PerformanceMetric

‚úÖ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞**
- AsyncConfig —Å ThreadPoolTaskExecutor
- @Async –Ω–∞ –≤—Å–µ—Ö event listeners
- –ù–µ –±–ª–æ–∫–∏—Ä—É–µ—Ç –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫

‚úÖ **AOP –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
- LoggingAspect –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ –º–µ—Ç–æ–¥—ã —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –∏ stack traces

‚úÖ **Spring Events**
- 9 —Ç–∏–ø–æ–≤ –±–∏–∑–Ω–µ—Å-—Å–æ–±—ã—Ç–∏–π
- Event-driven –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- –°–ª–∞–±–∞—è —Å–≤—è–∑–∞–Ω–Ω–æ—Å—Ç—å –º–æ–¥—É–ª–µ–π

‚úÖ **Event Listeners**
- AnalyticsEventListener –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
- –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ MongoDB
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –±–µ–∑ –ø–∞–¥–µ–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞

‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ —Å–µ—Ä–≤–∏—Å—ã**
- DoctorServiceImpl: 3 —Å–æ–±—ã—Ç–∏—è
- AnesthesiologistServiceImpl: 2 —Å–æ–±—ã—Ç–∏—è
- AdminServiceImpl: 3 —Å–æ–±—ã—Ç–∏—è
- PersonService: 2 —Å–æ–±—ã—Ç–∏—è
- NurseServiceImpl: 2 —Å–æ–±—ã—Ç–∏—è

‚úÖ **Analytics Service**
- –ê–≥—Ä–µ–≥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ MongoDB
- –í—ã—á–∏—Å–ª–µ–Ω–∏–µ –º–µ—Ç—Ä–∏–∫ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º, —Å–æ–±—ã—Ç–∏—è–º

‚úÖ **REST API**
- 8 —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

‚úÖ **DTO –∫–ª–∞—Å—Å—ã**
- EventStatsDTO
- UserActivityDTO
- PerformanceStatsDTO
- PatientStatsDTO

---

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

1. **Security** ‚Äî –¥–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–∏ ADMIN –¥–ª—è Analytics API
2. **Grafana Dashboard** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç—Ä–∏–∫
3. **Alerts** ‚Äî —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–æ–±—ã—Ç–∏—è—Ö
4. **Export** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –æ—Ç—á–µ—Ç–æ–≤ –≤ PDF/Excel
5. **Real-time updates** ‚Äî WebSocket –¥–ª—è live dashboard

---

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** 10.10.2025  
**–ú–æ–¥—É–ª—å:** Analytics & Monitoring  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:** Spring Boot, MongoDB, AOP, Spring Events, Async Processing
