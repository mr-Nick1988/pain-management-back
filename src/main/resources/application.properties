# ============================================
# APPLICATION CONFIGURATION
# ============================================
spring.application.name=pain_helper_back
server.port=8080

# ============================================
# DATABASE CONFIGURATION - PostgreSQL
# ============================================
# Main business database (patients, recommendations, escalations, etc.)
spring.datasource.url=jdbc:postgresql://localhost:5432/pain_management_db
spring.datasource.username=postgres
spring.datasource.password=newpassword
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true

# Connection Pool (HikariCP)
spring.datasource.hikari.connection-timeout=20000
spring.datasource.hikari.maximum-pool-size=5

# Liquibase (disabled - using Hibernate DDL)
spring.liquibase.enabled=false

# ============================================
# JWT CONFIGURATION
# ============================================
# CRITICAL: Must match Authentication Service secret!
jwt.secret=your-256-bit-secret-key-change-this-in-production-please-make-it-long-enough

# ============================================
# MONGODB CONFIGURATION - Analytics Logging
# ============================================
# Used for logging user actions, API calls, and analytics

spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.mongo.MongoAutoConfiguration,org.springframework.boot.autoconfigure.data.mongo.MongoDataAutoConfiguration
spring.data.mongodb.repositories.enabled=false
spring.data.mongodb.auto-index-creation=true

app.mongodb.analytics.uri=mongodb+srv://analytic_user:AYUVxuwzxVYa6RNf@pmanalyticsreporting.2iybsfr.mongodb.net/
app.mongodb.performance.uri=mongodb+srv://performanceUser:Fd2WCHMCKwjNC2vR@pmaslaperformance.x4ccj5j.mongodb.net/
app.mongodb.backup.uri=mongodb+srv://backup_user:AXYuHAjMAuHADRLr@pmabackup.7uqmayq.mongodb.net/
app.mongodb.analytics.database=analytics_db
app.mongodb.performance.database=performance_db
app.mongodb.backup.database=backup_db
# ============================================
# KAFKA CONFIGURATION
# ============================================
# Used for event streaming and logging
spring.kafka.bootstrap-servers=localhost:9092
logging.kafka.enabled=true

# ============================================
# ASYNC CONFIGURATION
# ============================================
spring.task.execution.pool.core-size=5
spring.task.execution.pool.max-size=10
spring.task.execution.pool.queue-capacity=100

# ============================================
# PERFORMANCE SLA MONITORING
# ============================================
performance.sla.enabled=true
performance.sla.async-recording=true

# ============================================
# BACKUP CONFIGURATION
# ============================================
backup.postgres.directory=./backups/postgres
backup.mongo.directory=./backups/mongodb
backup.retention.days=30
backup.mongo.mongodump.path=mongodump
backup.mongo.mongorestore.path=mongorestore

# ============================================
# FHIR SERVER CONFIGURATION
# ============================================
# External EMR integration via FHIR R4
fhir.server.url=http://hapi.fhir.org/baseR4
fhir.connection.timeout=30000
fhir.socket.timeout=30000

# ============================================
# EMAIL CONFIGURATION (Spring Mail)
# ============================================
# For notifications and alerts
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=your-email@gmail.com
spring.mail.password=your-app-password
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=5000
spring.mail.properties.mail.smtp.writetimeout=5000

# Alternative: Mailtrap for testing (https://mailtrap.io/)
# spring.mail.host=sandbox.smtp.mailtrap.io
# spring.mail.port=2525
# spring.mail.username=your-mailtrap-username
# spring.mail.password=your-mailtrap-password

# ============================================
# PAIN ESCALATION CONFIGURATION (Optional)
# ============================================
# Uncomment to customize escalation thresholds
#pain.escalation.min-vas-increase=2
#pain.escalation.min-dose-interval-hours=4
#pain.escalation.critical-vas-level=8
#pain.escalation.high-vas-level=6
#pain.escalation.trend-analysis-period-hours=24
#pain.escalation.max-escalations-per-period=3
# ============================================
# LOGGING CONFIGURATION
# ============================================
logging.level.pain_helper_back=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.pain_helper_back.security.JwtAuthenticationFilter=DEBUG